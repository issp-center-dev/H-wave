<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.1. Tutorial &#8212; H-wave Users Guide 1.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=66c3864b" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=0b546569"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3.2. File specifications" href="../filespecification/fi-index.html" />
    <link rel="prev" title="3. Coordinate-space UHF (UHFr)" href="../uhfr-index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="tutorial">
<h1><span class="section-number">3.1. </span>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this heading">¶</a></h1>
<p>To use H-wave, you need to prepare the input files:</p>
<ol class="arabic simple">
<li><p>parameter file to set calculation conditions,</p></li>
<li><p>definition files of the Hamiltonian,</p></li>
<li><p>specifications to output the results,</p></li>
</ol>
<p>before performing calculations.
In the following, we will provide a tutorial
using a sample in <code class="docutils literal notranslate"><span class="pre">docs/tutorial/Hubbard/UHFr</span></code> directory.
The interaction definition files can be generated using StdFace library.
See <a class="reference internal" href="../../appendix/stdface.html#ch-stdface"><span class="std std-ref">Generation of interaction files using StdFace library</span></a> section for the details.</p>
<section id="create-a-parameter-file">
<h2><span class="section-number">3.1.1. </span>Create a parameter file<a class="headerlink" href="#create-a-parameter-file" title="Permalink to this heading">¶</a></h2>
<p>The parameter file contains information to control inputs and outputs of the program.
An example is given in the directory <code class="docutils literal notranslate"><span class="pre">docs/tutorial/Hubbard/UHFr</span></code> by the name <code class="docutils literal notranslate"><span class="pre">input.toml</span></code>.
The content of the file will be as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[log]
print_level = 1
print_step = 20
[mode]
mode = &quot;UHFr&quot;
[mode.param]
Nsite = 8
2Sz = 0
Ncond = 8
IterationMax = 1000
EPS = 8
RndSeed = 123456789
T = 0.0
[file]
[file.input]
path_to_input = &quot;&quot;
OneBodyG = &quot;greenone.def&quot;
[file.input.interaction]
Trans = &quot;trans.def&quot;
CoulombIntra = &quot;coulombintra.def&quot;
[file.output]
path_to_output = &quot;output&quot;
energy = &quot;energy.dat&quot;
eigen = &quot;eigen&quot;
green = &quot;green.dat&quot;
</pre></div>
</div>
<p>The parameter file is described in TOML format.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">log</span></code> section, <code class="docutils literal notranslate"><span class="pre">print_level</span></code> specifies the level of the standard output, and <code class="docutils literal notranslate"><span class="pre">print_step</span></code> specifies the number of steps between printing logs.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">mode</span></code> section, the calculation mode and the basic parameters are specified.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">file.input</span></code> section, <code class="docutils literal notranslate"><span class="pre">path_to_input</span></code> specifies the directory in which input files are located, <code class="docutils literal notranslate"><span class="pre">OneBodyG</span></code> specifies the definition file of the one-body Green’s function to output, and <code class="docutils literal notranslate"><span class="pre">Initial</span></code> specifies the initial configuration.
If <code class="docutils literal notranslate"><span class="pre">OneBodyG</span></code> is missing, the Green’s function will not be exported.
When <code class="docutils literal notranslate"><span class="pre">Initial</span></code> is not specified, a random configuration will be generated for the initial state.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">file.input.interaction</span></code> section, the input files to define Hamiltonian are specified.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">file.output</span></code> section, <code class="docutils literal notranslate"><span class="pre">path_to_output</span></code> specifies the directory to which the results will be written. <code class="docutils literal notranslate"><span class="pre">energy</span></code> specifies the filename for the energy, <code class="docutils literal notranslate"><span class="pre">eigen</span></code> specifies the filename for the eigenvalues and eigenvectors of the Hamiltonian, and <code class="docutils literal notranslate"><span class="pre">green</span></code> specifies the filename for the one-body Green’s function.
If these keywords are missing, the corresponding results will not be exported.</p>
<p>See <a class="reference internal" href="../filespecification/config/index_config.html#ch-config-uhfr"><span class="std std-ref">Parameter file</span></a> section for the details.</p>
</section>
<section id="create-definition-files-for-hamiltonian">
<h2><span class="section-number">3.1.2. </span>Create definition files for Hamiltonian<a class="headerlink" href="#create-definition-files-for-hamiltonian" title="Permalink to this heading">¶</a></h2>
<p>Next, we will create input files that define the Hamiltonian.</p>
<section id="transfer-term">
<h3>Transfer term<a class="headerlink" href="#transfer-term" title="Permalink to this heading">¶</a></h3>
<p>The input file associated with a keyword <code class="docutils literal notranslate"><span class="pre">Trans</span></code> (<code class="docutils literal notranslate"><span class="pre">trans.def</span></code> in this tutorial)
provides definitions of Hamltonian for Transfer term of the electron system:</p>
<div class="math notranslate nohighlight" id="equation-uhfr-tutorial-tu-index-0">
<span class="eqno">(3.1)<a class="headerlink" href="#equation-uhfr-tutorial-tu-index-0" title="Permalink to this equation">¶</a></span>\[\mathcal{H} = -\sum_{ij\sigma_1\sigma_2}
t_{ij\sigma_1\sigma_2}c_{i\sigma_1}^{\dagger}c_{j\sigma_2}^{\phantom\dagger}.\]</div>
<p>The content of the file is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>========================
NTransfer      64
========================
========i_j_s_tijs======
========================
    4     0     0     0         1.000000000000000         0.000000000000000
    0     0     4     0         1.000000000000000        -0.000000000000000
    4     1     0     1         1.000000000000000         0.000000000000000
    0     1     4     1         1.000000000000000        -0.000000000000000
    2     0     0     0         1.000000000000000         0.000000000000000
    0     0     2     0         1.000000000000000        -0.000000000000000
    2     1     0     1         1.000000000000000         0.000000000000000
    0     1     2     1         1.000000000000000        -0.000000000000000
...
</pre></div>
</div>
<p>See <a class="reference internal" href="../filespecification/inputfiles/Trans_file.html#subsec-trans"><span class="std std-ref">Trans file</span></a> for the details.</p>
</section>
<section id="two-body-interaction-term">
<h3>Two-body interaction term<a class="headerlink" href="#two-body-interaction-term" title="Permalink to this heading">¶</a></h3>
<p>In this tutorial, we consider a two-body interaction Hamiltonian of the electron system
of the form:</p>
<div class="math notranslate nohighlight" id="equation-uhfr-tutorial-tu-index-1">
<span class="eqno">(3.2)<a class="headerlink" href="#equation-uhfr-tutorial-tu-index-1" title="Permalink to this equation">¶</a></span>\[\mathcal{H} = \sum_{i} U_i n_{i\uparrow}n_{i\downarrow}.\]</div>
<p>The definition is given in the file associated with the keyword <code class="docutils literal notranslate"><span class="pre">CoulombIntra</span></code>
(<code class="docutils literal notranslate"><span class="pre">coulombintra.def</span></code> in the present case).
The content of the file is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>=============================================
NCoulombIntra          8
=============================================
================== CoulombIntra ================
=============================================
    0         8.000000000000000
    1         8.000000000000000
    2         8.000000000000000
    3         8.000000000000000
    4         8.000000000000000
 ...
</pre></div>
</div>
<p>There are a number of keywords provided to concicely describe the Hamiltonian,
besides <code class="docutils literal notranslate"><span class="pre">CoulombIntra</span></code>.
See sections <a class="reference internal" href="../filespecification/inputfiles/InterAll_file.html#subsec-interall"><span class="std std-ref">InterAll file</span></a> - <a class="reference internal" href="../filespecification/inputfiles/PairLift_file.html#subsec-pairlift"><span class="std std-ref">PairLift file</span></a> for the details.</p>
</section>
</section>
<section id="specify-output-components">
<h2><span class="section-number">3.1.3. </span>Specify output components<a class="headerlink" href="#specify-output-components" title="Permalink to this heading">¶</a></h2>
<p>Next, we will provide the files that describe the output components.</p>
<section id="setting-indices-of-one-body-green-s-functions">
<h3>Setting indices of one-body Green’s functions<a class="headerlink" href="#setting-indices-of-one-body-green-s-functions" title="Permalink to this heading">¶</a></h3>
<p>A file associated with the keyword <code class="docutils literal notranslate"><span class="pre">OneBodyG</span></code> (<code class="docutils literal notranslate"><span class="pre">greenone.def</span></code> in this tutorial) specifies
the indices of one-body Green’s functions to be calculated
<span class="math notranslate nohighlight">\(\langle c_{i\sigma_1}^{\dagger}c_{j\sigma_2} \rangle\)</span>.
The content of the file will be as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>===============================
NCisAjs         16
===============================
======== Green functions ======
===============================
    0     0     0     0
    0     0     1     0
    0     0     2     0
    0     0     3     0
    0     0     4     0
 ...
</pre></div>
</div>
<p>See <a class="reference internal" href="../filespecification/inputfiles/OneBodyG_file.html#subsec-onebodyg"><span class="std std-ref">OneBodyG file</span></a> for the details of the file format
to specify indices of the one-body Green’s functions.</p>
</section>
</section>
<section id="run">
<h2><span class="section-number">3.1.4. </span>Run<a class="headerlink" href="#run" title="Permalink to this heading">¶</a></h2>
<p>All the input files have been created, and we are ready to run the program.
Type in the command with the parameter file (<code class="docutils literal notranslate"><span class="pre">input.toml</span></code> in this tutorial) as an argument:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>hwave<span class="w"> </span>input.toml
</pre></div>
</div>
<p>The calculation is launched, and the logs will be shown as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2022-12-01 09:37:30,114 INFO qlms: Read def files
2022-12-01 09:37:30,116 INFO qlms: Get Hamiltonian information
2022-12-01 09:37:30,116 INFO qlms: Get Green function information
2022-12-01 09:37:30,116 INFO qlms.uhfr: Show input parameters
  Nsite               : 8
  Ncond               : 8
  2Sz                 : 0
  Mix                 : 0.5
  EPS                 : 1e-08
  IterationMax        : 1000
  RndSeed             : 123456789
  T                   : 0.0
  ene_cutoff          : 100.0
  threshold           : 1e-12
2022-12-01 09:37:30,117 INFO qlms: Start UHF calculation
2022-12-01 09:37:30,117 INFO qlms.uhfr: Set Initial Green&#39;s functions
2022-12-01 09:37:30,117 INFO qlms.uhfr: Initialize green function by random numbers
2022-12-01 09:37:30,117 INFO qlms.uhfr: Start UHFr calculations
2022-12-01 09:37:30,117 INFO qlms.uhfr: step, rest, energy, NCond, Sz
2022-12-01 09:37:30,119 INFO qlms.uhfr: 0, 0.022144468, -27.16081+0j, 8, -7.425e-16
2022-12-01 09:37:30,134 INFO qlms.uhfr: 20, 1.2083848e-05, -3.399532+0j, 8, -1.055e-15
2022-12-01 09:37:30,145 INFO qlms.uhfr: UHFr calculation is succeeded: rest=5.7552848630056134e-09, eps=1e-08.
2022-12-01 09:37:30,145 INFO qlms: Save calculation results.
2022-12-01 09:37:30,146 INFO qlms: All procedures are finished.
--------------------------------------------------------------------------------
Statistics
  function                         :  total elapsed  : average elapsed : ncalls
--------------------------------------------------------------------------------
  hwave.solver.uhfr.__init__       :      0.357 msec :      0.357 msec :      1
  hwave.solver.uhfr._initial_G     :      0.090 msec :      0.090 msec :      1
  hwave.solver.uhfr._makeham_const :      0.839 msec :      0.839 msec :      1
  hwave.solver.uhfr._makeham_mat   :      0.309 msec :      0.309 msec :      1
  hwave.solver.uhfr._makeham       :      6.001 msec :      0.176 msec :     34
  hwave.solver.uhfr._diag          :      2.468 msec :      0.073 msec :     34
  hwave.solver.uhfr._green         :      3.107 msec :      0.091 msec :     34
  hwave.solver.uhfr._calc_energy   :      1.990 msec :      0.059 msec :     34
  hwave.solver.uhfr._calc_phys     :     12.929 msec :      0.380 msec :     34
  hwave.solver.uhfr.solve          :     28.290 msec :     28.290 msec :      1
  hwave.solver.uhfr.save_results   :      0.852 msec :      0.852 msec :      1
--------------------------------------------------------------------------------
</pre></div>
</div>
<p>The log messages on reading the input files are presented, followed by the information
on the process of UHF calculations.
The results are written in the <code class="docutils literal notranslate"><span class="pre">output</span></code> directory, according to the settings in <code class="docutils literal notranslate"><span class="pre">file.output</span></code> section of the input toml file:
<code class="docutils literal notranslate"><span class="pre">energy.dat</span></code> for the eigenvalues,
<code class="docutils literal notranslate"><span class="pre">spin-up_eigen.npz</span></code> and <code class="docutils literal notranslate"><span class="pre">spin-down_eigen.npz</span></code> for the eigenvectors, and
<code class="docutils literal notranslate"><span class="pre">green.dat</span></code> for the one-body Green’s functions.
See <a class="reference internal" href="../filespecification/outputfiles/index_outputfiles.html#sec-outputfile"><span class="std std-ref">Output files for UHFr</span></a> section for the details of the output files.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/Hwave_logo.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">1. What is H-wave?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../howtouse/ho-index.html">2. Basic usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../uhfr-index.html">3. Coordinate-space UHF (UHFr)</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.1. Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-a-parameter-file">3.1.1. Create a parameter file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-definition-files-for-hamiltonian">3.1.2. Create definition files for Hamiltonian</a></li>
<li class="toctree-l3"><a class="reference internal" href="#specify-output-components">3.1.3. Specify output components</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run">3.1.4. Run</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../filespecification/fi-index.html">3.2. File specifications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../uhfk/uhfk-index.html">4. Wave-number space UHF (UHFk)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rpa/rpa-index.html">5. Random Phase Approximation (RPA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../algorithm/al-index.html">6. Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../acknowledgement.html">7. Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/app-index.html">8. Appendix</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../uhfr-index.html"><span class="section-number">3. </span>Coordinate-space UHF (UHFr)</a><ul>
      <li>Previous: <a href="../uhfr-index.html" title="previous chapter"><span class="section-number">3. </span>Coordinate-space UHF (UHFr)</a></li>
      <li>Next: <a href="../filespecification/fi-index.html" title="next chapter"><span class="section-number">3.2. </span>File specifications</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022-, The University of Tokyo.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/uhfr/tutorial/tu-index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>